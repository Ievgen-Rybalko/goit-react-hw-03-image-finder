{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/pixabayAPI.js","App.js","reportWebVitals.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","searchQuery","btnDisabled","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","trim","length","props","onQuerySubmit","prevState","className","styles","onSubmit","this","type","disabled","SearchForm__button_disabled","SearchForm__button","autoComplete","autoFocus","placeholder","serchQuery","onChange","Component","Button","More__button","onClick","onGetMore","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackDropClick","target","window","addEventListener","removeEventListener","src","alt","createPortal","Overlay","ImageGallery","scrollTo","top","documentElement","scrollHeight","behavior","children","ImageGalleryItem","id","url","ImageGalleryItem__container","BASE_URL","KEY","IMG_TYPE","api","fetchImages","currentPage","fetch","then","res","ok","json","Promise","reject","Error","App","showModal","urlModal","altModal","imgOnCurrentPage","images","largeImageURL","toggleModal","handleQuerySubmit","error","handleImageClick","getAttribute","fetchImgs","pixabayAPI","data","hits","catch","message","finally","isLoading","prevProps","shouldRenderBtn","style","color","border","borderRadius","fontSize","map","tags","webformatURL","height","width","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.41cbc2bd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__26ZPx\",\"Modal\":\"Modal_Modal__1jw-k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem__container\":\"ImageGalleryItem_ImageGalleryItem__container__gfv0e\",\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__YFtx_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"More__button\":\"Button_More__button__2SXQI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3d69f\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n    btnDisabled: true,\n  };\n\n  // formSubmited = {\n  //   valueSubmited: '',\n  // };\n\n  // componentDidUpdate() {\n  //   console.log('Btn componentDidUpdate ?');\n  //   const { valueSubmited } = this.formSubmited;\n  //   if (\n  //     this.state.className === 'active' &&\n  //     this.state.searchQuery === valueSubmited\n  //   ) {\n  //     this.setState(prevState => {\n  //       return { ...prevState, className: 'inactive' };\n  //     });\n  //   }\n  // }\n\n  handleChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value, btnDisabled: false, });\n  };\n\n\n  handleSubmit = e => {\n    //console.log('submit btn pressed');\n    e.preventDefault();\n    const normalizedSearchQuery = this.state.searchQuery.trim();\n    \n    if (normalizedSearchQuery.length !== 0) {\n      this.props.onQuerySubmit(this.state.searchQuery.trim());\n    }\n    this.setState(prevState => {\n      return { ...prevState, btnDisabled: true, };\n    });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          {(this.state.btnDisabled)?(<button\n            type=\"submit\"\n            disabled\n            className={styles.SearchForm__button_disabled}\n          >\n            <span>Search</span>\n          </button>):\n          <button\n          type=\"submit\"\n          className={styles.SearchForm__button}\n          >\n            <span>Search</span>\n          </button>}\n          \n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.serchQuery}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onQuerySubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nclass Button extends Component {\n  render() {\n    return (\n      <button type=\"button\" className={styles.More__button} onClick={this.props.onGetMore}>\n        Load more\n      </button>\n    );\n  }\n}\nButton.propTypes = {\n  onGetMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackDropClick = e => {\n    // console.log(\n    //   'e.currentTarget: ',\n    //   e.currentTarget,\n    //   '   e.target: ',\n    //   e.target,\n    // );\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { src, alt } = this.props;\n    //console.log('Styles in modal', styles.Overlay);\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.handleBackDropClick}>\n        <div className={styles.Modal}>\n          <img src={src} alt={alt} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGallery.module.css';\n\nclass ImageGallery extends Component {\n  componentDidUpdate() {\n   //console.log('gallerey was Updated:', document.documentElement.scrollHeight);\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    return <ul className={styles.ImageGallery}>{this.props.children}</ul>;\n  }\n}\n\nImageGallery.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\n\nimport styles from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ id, alt, src, url, onClick }) => (\n  <li className={styles.ImageGalleryItem__container}>\n    <img\n      src={src}\n      alt={alt}\n      url={url}\n      onClick={onClick}\n      className={styles.ImageGalleryItem}\n    />\n  </li>\n);\nImageGalleryItem.propTypes = {\n  alt: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","//import axios from 'axios';\n\n//axios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = 'key=21933433-c49aed7af732e0bc1136ba9bb';\nconst IMG_TYPE = 'image_type=photo&orientation=horizontal';\n\nfunction fetchImages(searchQuery = '', currentPage = 1) {\n//   console.log(\n//     'Inside API file: searchQuery',\n//     searchQuery,\n//     'currentPage',\n//     currentPage,\n//   );\n  return fetch(\n    `${BASE_URL}?q=${searchQuery}&page=${currentPage}&${KEY}&${IMG_TYPE}&per_page=12`,\n  ).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error(`Bad request!!! No response from server`));\n  });\n}\n\nconst api = { fetchImages };\nexport default api;\n\n// axios.get('/user?ID=12345')\n//   .then(function (response) {\n//     // handle success\n//     console.log(response);\n//   })\n//   .catch(function (error) {\n//     // handle error\n//     console.log(error);\n//   })\n//   .then(function () {\n//     // always executed\n//   });\n","import { Component } from 'react';\n//import Section from './components/Section/Section';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport Button from './components/Button/Button';\nimport Modal from './components/Modal/Modal';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport ImageGalleryItem from './components/ImageGalleryItem/ImageGalleryItem';\nimport pixabayAPI from './components/pixabayAPI';\nimport './App.css';\nimport Loader from 'react-loader-spinner';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    currentPage: 1,\n    showModal: false,\n    urlModal: '',\n    altModal: '',\n    imgOnCurrentPage: [],\n    images: [],\n    largeImageURL: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.searchQuery !== prevState.searchQuery) {\n      this.fetchImgs();\n    }\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleQuerySubmit = searchQuery => {\n    this.setState({\n      searchQuery,\n      images: [],\n      currentPage: 1,\n      error: null,\n    });\n  };\n\n  handleImageClick = e => {\n    this.toggleModal();\n    this.setState({\n      urlModal: e.currentTarget.getAttribute('url'),\n      altModal: e.currentTarget.getAttribute('alt'),\n    });\n  };\n\n  fetchImgs = () => {\n    // this.setState({ isLoading: true },);\n    \n    pixabayAPI\n      .fetchImages(this.state.searchQuery, this.state.currentPage)\n      .then(data => {\n        //console.log('images data', data);\n        const images = data.hits;\n        this.setState(prevState => ({\n          imgOnCurrentPage: [...images],\n          images: [...prevState.images, ...images],\n          currentPage: prevState.currentPage + 1,\n        }));\n        if (images.length < 1) {\n          this.setState({\n            error: 'No more images. Try another querry!!!',\n          });\n        }\n      })\n      .catch(e => this.setState({ error: e.message }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  //https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\n  //id - уникальный идентификатор\n  //webformatURL - ссылка на маленькое изображение для списка карточек\n  //largeImageURL - ссылка на большое изображение для модального окна\n\n  render() {\n    const { error, showModal, altModal, urlModal } = this.state;\n    const { images, imgOnCurrentPage, isLoading } = this.state;\n    const shouldRenderBtn = !isLoading && !(imgOnCurrentPage.length < 12);\n    return (\n      <div className=\"App\">\n        <Searchbar onQuerySubmit={this.handleQuerySubmit} />\n        {error && (\n          <p\n            style={{\n              color: 'red',\n              border: '1px solid red',\n              borderRadius: '3px',\n              fontSize: '16px',\n            }}\n          >\n            Error!!! : {error}\n          </p>\n        )}\n\n        <ImageGallery>\n          {images.map(({ id, tags, webformatURL, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              alt={tags}\n              src={webformatURL}\n              url={largeImageURL}\n              onClick={this.handleImageClick}\n            />\n          ))}\n        </ImageGallery>\n\n        {isLoading && (\n          <Loader type=\"Bars\" color=\"#00BFFF\" height={100} width={100} />\n        )}\n\n        {shouldRenderBtn && <Button onGetMore={this.fetchImgs} />}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal} src={urlModal} alt={altModal} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__EvRA1\",\"SearchForm__button\":\"Searchbar_SearchForm__button__286PY\",\"SearchForm__button_disabled\":\"Searchbar_SearchForm__button_disabled__ngcWM\"};"],"sourceRoot":""}